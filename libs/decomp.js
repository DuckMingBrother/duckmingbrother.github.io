!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.decomp=n()}}(function(){return function n(r,e,t){function u(o,i){if(!e[o]){if(!r[o]){var l="function"==typeof require&&require;if(!i&&l)return l(o,!0);if(f)return f(o,!0);throw new Error("Cannot find module '"+o+"'")}var a=e[o]={exports:{}};r[o][0].call(a.exports,function(n){var e=r[o][1][n];return u(e||n)},a,a.exports,n,r,e,t)}return e[o].exports}for(var f="function"==typeof require&&require,o=0;o<t.length;o++)u(t[o]);return u}({1:[function(n,r,e){function t(n,r,e){e=e||0;var t,u,f,o,i,l,a,h=[0,0];return t=n[1][1]-n[0][1],u=n[0][0]-n[1][0],f=t*n[0][0]+u*n[0][1],o=r[1][1]-r[0][1],i=r[0][0]-r[1][0],l=o*r[0][0]+i*r[0][1],a=t*i-o*u,b(a,0,e)||(h[0]=(i*f-u*l)/a,h[1]=(t*l-o*f)/a),h}function u(n,r,e,t){var u=r[0]-n[0],f=r[1]-n[1],o=t[0]-e[0],i=t[1]-e[1];if(o*f-i*u==0)return!1;var l=(u*(e[1]-n[1])+f*(n[0]-e[0]))/(o*f-i*u),a=(o*(n[1]-e[1])+i*(e[0]-n[0]))/(i*u-o*f);return l>=0&&l<=1&&a>=0&&a<=1}function f(n,r,e){return(r[0]-n[0])*(e[1]-n[1])-(e[0]-n[0])*(r[1]-n[1])}function o(n,r,e){return f(n,r,e)>0}function i(n,r,e){return f(n,r,e)>=0}function l(n,r,e){return f(n,r,e)<0}function a(n,r,e){return f(n,r,e)<=0}function h(n,r,e,t){if(t){var u=q,o=w;u[0]=r[0]-n[0],u[1]=r[1]-n[1],o[0]=e[0]-r[0],o[1]=e[1]-r[1];var i=u[0]*o[0]+u[1]*o[1],l=Math.sqrt(u[0]*u[0]+u[1]*u[1]),a=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(i/(l*a))<t}return 0===f(n,r,e)}function c(n,r){var e=r[0]-n[0],t=r[1]-n[1];return e*e+t*t}function s(n,r){var e=n.length;return n[r<0?r%e+e:r%e]}function g(n,r,e,t){for(var u=e;u<t;u++)n.push(r[u])}function p(n,r){return l(s(n,r-1),s(n,r),s(n,r+1))}function v(n,r,e){var u,f,o=M,l=k;if(i(s(n,r+1),s(n,r),s(n,e))&&a(s(n,r-1),s(n,r),s(n,e)))return!1;f=c(s(n,r),s(n,e));for(var h=0;h!==n.length;++h)if((h+1)%n.length!==r&&h!==r&&i(s(n,r),s(n,e),s(n,h+1))&&a(s(n,r),s(n,e),s(n,h))&&(o[0]=s(n,r),o[1]=s(n,e),l[0]=s(n,h),l[1]=s(n,h+1),u=t(o,l),c(s(n,r),u)<f))return!1;return!0}function d(n,r,e,t){var u=t||[];if(function(n){n.length=0}(u),r<e)for(f=r;f<=e;f++)u.push(n[f]);else{for(f=0;f<=e;f++)u.push(n[f]);for(var f=r;f<n.length;f++)u.push(n[f])}return u}function m(n){for(var r=[],e=[],t=[],u=[],f=Number.MAX_VALUE,o=0;o<n.length;++o)if(p(n,o))for(var i=0;i<n.length;++i)if(v(n,o,i)){e=m(d(n,o,i,u)),t=m(d(n,i,o,u));for(var l=0;l<t.length;l++)e.push(t[l]);e.length<f&&(r=e,f=e.length,r.push([s(n,o),s(n,i)]))}return r}function y(n,r){if(0===r.length)return[n];if(r instanceof Array&&r.length&&r[0]instanceof Array&&2===r[0].length&&r[0][0]instanceof Array){for(var e=[n],t=0;t<r.length;t++)for(var u=r[t],f=0;f<e.length;f++){var o=y(e[f],u);if(o){e.splice(f,1),e.push(o[0],o[1]);break}}return e}var u=r,t=n.indexOf(u[0]),f=n.indexOf(u[1]);return-1!==t&&-1!==f&&[d(n,t,f),d(n,f,t)]}function x(n,r,e,t,u){u=u||0;var f=r[1]-n[1],o=n[0]-r[0],i=f*n[0]+o*n[1],l=t[1]-e[1],a=e[0]-t[0],h=l*e[0]+a*e[1],c=f*a-l*o;return b(c,0,u)?[0,0]:[(a*i-o*h)/c,(f*h-l*i)/c]}function A(n,r,e,t,u,f,h){f=f||100,h=h||0,u=u||25,r=void 0!==r?r:[],e=e||[],t=t||[];var v=[0,0],d=[0,0],m=[0,0],y=0,b=0,q=0,w=0,M=0,k=0,C=0,E=[],L=[],N=n,U=n;if(U.length<3)return r;if(++h>f)return console.warn("quickDecomp: max level ("+f+") reached."),r;for(var V=0;V<n.length;++V)if(p(N,V)){e.push(N[V]),y=b=Number.MAX_VALUE;for(X=0;X<n.length;++X)o(s(N,V-1),s(N,V),s(N,X))&&a(s(N,V-1),s(N,V),s(N,X-1))&&(m=x(s(N,V-1),s(N,V),s(N,X),s(N,X-1)),l(s(N,V+1),s(N,V),m)&&(q=c(N[V],m))<b&&(b=q,d=m,k=X)),o(s(N,V+1),s(N,V),s(N,X+1))&&a(s(N,V+1),s(N,V),s(N,X))&&(m=x(s(N,V+1),s(N,V),s(N,X),s(N,X+1)),o(s(N,V-1),s(N,V),m)&&(q=c(N[V],m))<y&&(y=q,v=m,M=X));if(k===(M+1)%n.length)m[0]=(d[0]+v[0])/2,m[1]=(d[1]+v[1])/2,t.push(m),V<M?(g(E,N,V,M+1),E.push(m),L.push(m),0!==k&&g(L,N,k,N.length),g(L,N,0,V+1)):(0!==V&&g(E,N,V,N.length),g(E,N,0,M+1),E.push(m),L.push(m),g(L,N,k,V+1));else{if(k>M&&(M+=n.length),w=Number.MAX_VALUE,M<k)return r;for(var X=k;X<=M;++X)i(s(N,V-1),s(N,V),s(N,X))&&a(s(N,V+1),s(N,V),s(N,X))&&(q=c(s(N,V),s(N,X)))<w&&(w=q,C=X%n.length);V<C?(g(E,N,V,C+1),0!==C&&g(L,N,C,U.length),g(L,N,0,V+1)):(0!==V&&g(E,N,V,U.length),g(E,N,0,C+1),g(L,N,C,V+1))}return E.length<L.length?(A(E,r,e,t,u,f,h),A(L,r,e,t,u,f,h)):(A(L,r,e,t,u,f,h),A(E,r,e,t,u,f,h)),r}return r.push(n),r}function b(n,r,e){return e=e||0,Math.abs(n-r)<e}r.exports={decomp:function(n){var r=m(n);return r.length>0?y(n,r):[n]},quickDecomp:A,isSimple:function(n){var r,e=n;for(r=0;r<e.length-1;r++)for(var t=0;t<r-1;t++)if(u(e[r],e[r+1],e[t],e[t+1]))return!1;for(r=1;r<e.length-2;r++)if(u(e[0],e[e.length-1],e[r],e[r+1]))return!1;return!0},removeCollinearPoints:function(n,r){for(var e=0,t=n.length-1;n.length>3&&t>=0;--t)h(s(n,t-1),s(n,t),s(n,t+1),r)&&(n.splice(t%n.length,1),e++);return e},makeCCW:function(n){for(var r=0,e=n,t=1;t<n.length;++t)(e[t][1]<e[r][1]||e[t][1]===e[r][1]&&e[t][0]>e[r][0])&&(r=t);o(s(n,r-1),s(n,r),s(n,r+1))||function(n){for(var r=[],e=n.length,t=0;t!==e;t++)r.push(n.pop());for(t=0;t!==e;t++)n[t]=r[t]}(n)}};var q=[],w=[],M=[],k=[]},{}]},{},[1])(1)});